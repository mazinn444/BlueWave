<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import atlantafx.base.controls.ToggleSwitch?>

<BorderPane fx:id="rootPane" prefHeight="800.0" prefWidth="1200.0" stylesheets="@style.css" xmlns="http://javafx.com/javafx/20" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.music.AppController">
    
    <left>
        <VBox prefWidth="240.0" spacing="8.0" styleClass="sidebar">
            <padding><Insets top="20" right="15" bottom="20" left="15"/></padding>
            <Label text="BlueWave" styleClass="app-title">
                <graphic><Circle radius="6" fill="#0078d7"/></graphic>
            </Label>
            <Separator/>
            <Button text="ðŸ  InÃ­cio / Biblioteca" maxWidth="Infinity" styleClass="menu-btn" onAction="#showLibrary"/>
            <Button text="âš™ ConfiguraÃ§Ãµes" maxWidth="Infinity" styleClass="menu-btn" onAction="#showSettings"/>
            <Label text="PLAYLISTS" styleClass="section-header"><VBox.margin><Insets top="20"/></VBox.margin></Label>
            <Button text="+ Nova Playlist" styleClass="accent-btn-outline" maxWidth="Infinity" onAction="#createPlaylist"/>
            <ListView fx:id="playlistList" VBox.vgrow="ALWAYS" styleClass="playlist-list"/>
            <Label fx:id="lblVersion" text="v..." styleClass="version-label" alignment="CENTER" maxWidth="Infinity"/>
        </VBox>
    </left>

    <center>
        <StackPane styleClass="content-area">
            <VBox fx:id="viewLibrary" spacing="15.0">
                <padding><Insets top="20" right="30" bottom="20" left="30"/></padding>
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <ImageView fx:id="coverImage" fitWidth="120" fitHeight="120" preserveRatio="true" styleClass="album-cover"/>
                    <VBox alignment="CENTER_LEFT">
                        <Label text="PLAYLIST" styleClass="sub-header"/>
                        <Label fx:id="lblCurrentPlaylistName" text="Todas as MÃºsicas" styleClass="header-large"/>
                        <Label fx:id="lblStats" text="0 mÃºsicas" styleClass="sub-header"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <VBox alignment="CENTER_RIGHT" spacing="10">
                        <HBox spacing="10">
                             <TextField fx:id="txtSearch" promptText="ðŸ” Pesquisar..." styleClass="search-field" prefWidth="200"/>
                             <ComboBox fx:id="comboSearchType" prefWidth="100"/>
                        </HBox>
                        <Button text="Adicionar MÃºsicas" onAction="#importFiles" styleClass="accent-btn"/>
                    </VBox>
                </HBox>
                <TableView fx:id="songTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colTitle" text="TÃ­tulo" prefWidth="400"/>
                        <TableColumn fx:id="colArtist" text="Artista" prefWidth="200"/>
                        <TableColumn fx:id="colDuration" text="DuraÃ§Ã£o" prefWidth="100"/>
                    </columns>
                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                </TableView>
            </VBox>
            
            <VBox fx:id="viewSettings" spacing="30.0" visible="false" alignment="CENTER">
                <Label text="ConfiguraÃ§Ãµes" styleClass="header-large"/>
                <VBox spacing="15" alignment="CENTER" maxWidth="450" style="-fx-background-color: -color-bg-subtle; -fx-padding: 30; -fx-background-radius: 10;">
                    <Label text="AparÃªncia" styleClass="section-header"/>
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <Label text="Modo Escuro" style="-fx-font-size: 14px;" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                        <ToggleSwitch fx:id="toggleTheme" />
                    </HBox>
                    <Separator/>
                    <Label text="Performance" styleClass="section-header"/>
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <VBox HBox.hgrow="ALWAYS">
                            <Label text="Modo Batata" style="-fx-font-size: 14px; -fx-font-weight:bold;"/>
                            <Label text="Desativa animaÃ§Ãµes e visualizadores." style="-fx-font-size: 11px; -fx-text-fill: gray;"/>
                        </VBox>
                        <ToggleSwitch fx:id="togglePotato" />
                    </HBox>
                </VBox>
                <Button text="Salvar Dados Manualmente" onAction="#saveData"/>
            </VBox>
        </StackPane>
    </center>

    <right>
        <VBox fx:id="queueDrawer" prefWidth="250" styleClass="queue-drawer" visible="false" managed="false">
             <padding><Insets top="20" right="10" bottom="20" left="10"/></padding>
             <Label text="Fila de ReproduÃ§Ã£o" styleClass="section-header"/>
             <Label text="(Arraste para reordenar)" styleClass="version-label"/>
             <ListView fx:id="queueListView" VBox.vgrow="ALWAYS" styleClass="queue-list"/>
        </VBox>
    </right>

    <bottom>
        <HBox alignment="CENTER" prefHeight="95.0" spacing="15.0" styleClass="player-bar">
            <padding><Insets left="20" right="20"/></padding>
            <HBox alignment="CENTER_LEFT" prefWidth="300.0" spacing="15">
                <HBox fx:id="visualizerContainer" alignment="BOTTOM_CENTER" spacing="3" prefHeight="40" prefWidth="80" />
                <VBox alignment="CENTER_LEFT">
                    <Label fx:id="lblPlayerTitle" text="BlueWave" styleClass="player-title"/>
                    <Label fx:id="lblPlayerArtist" text="Selecione uma mÃºsica" styleClass="player-artist"/>
                </VBox>
            </HBox>
            <VBox alignment="CENTER" HBox.hgrow="ALWAYS" spacing="5">
                <HBox alignment="CENTER" spacing="20">
                    <ToggleButton fx:id="btnShuffle" text="ðŸ”€" styleClass="icon-btn"/>
                    <Button text="â®" onAction="#playPrev" styleClass="icon-btn"/>
                    <Button fx:id="btnPlay" text="â–¶" onAction="#togglePlay" styleClass="play-fab"/>
                    <Button text="â­" onAction="#playNext" styleClass="icon-btn"/>
                    <Button fx:id="btnRepeat" text="ðŸ”" styleClass="icon-btn"/>
                </HBox>
                <HBox alignment="CENTER" spacing="10">
                    <Label fx:id="lblCurrentTime" text="00:00" styleClass="time-text"/>
                    <Slider fx:id="seekSlider" HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblTotalTime" text="00:00" styleClass="time-text"/>
                </HBox>
            </VBox>
            <VBox alignment="CENTER_RIGHT" prefWidth="300.0" spacing="5">
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Button fx:id="btnQueue" text="â‰¡" onAction="#toggleQueueView" styleClass="icon-btn">
                        <tooltip><Tooltip text="Ver Fila" /></tooltip>
                    </Button>
                </HBox>
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Label text="Slowed" styleClass="small-label"/>
                    <Slider fx:id="speedSlider" min="0.5" max="1.5" value="1.0" prefWidth="100"/>
                </HBox>
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Label text="Vol" styleClass="small-label"/>
                    <Slider fx:id="volumeSlider" min="0.0" max="1.0" value="0.5" prefWidth="100"/>
                </HBox>
            </VBox>
        </HBox>
    </bottom>
</BorderPane>